\documentclass[12pt]{article}
\usepackage{geometry}
\usepackage{titlesec}
\usepackage{setspace}
\usepackage{fontsize}

% 页面设置
\geometry{a4paper, margin=1in}

% 标题格式设置
\titleformat{\section}[block]
  {\normalfont\centering\fontsize{25}{20}\bfseries} % 居中设置，字体大小 16pt
  {}{0em}{}[\titlerule]
  

\titleformat{\subsection}[block]
  {\normalfont\centering\fontsize{22}{18}\bfseries} % Subsection 居中设置，字体大小 14pt
  {}{0em}{}[\titlerule]

% 正文字体和段落设置
\setlength{\parindent}{1.27cm} % 首行缩进
\setlength{\parskip}{0pt} % 段落间距

\renewcommand{\normalsize}{\fontsize{15}{17}\selectfont}


% 标题和作者信息
\title{\fontsize{30}{24}\selectfont \textbf{Bomberman Developer Guide}} % 标题字体 30pt 加粗
\author{}
\date{}


\begin{document}

% 生成标题
\maketitle

\section{Public}
\hspace{1.27cm}This part contains data definitions, generate-layout function and its helper functions, some constant definitions and some public functions such as convert, get-symbol,in-bound?.
\section{Render}
\hspace{1.27cm}This section explains the rendering logic, including how the game layout, players, and other visual components are displayed on the screen.

\section{Keyhandler}
\hspace{1.27cm}This section discusses the handling of user inputs (keyboard events), which affect player movement, bomb placement, and other game actions.

\section{Timehandler}
\hspace{1.27cm}The \textbf{timehandler} function serves as the core logic for the on-tick process, responsible for updating the game state at each tick. It first calls the \textbf{updated-layout} and \textbf{updated-bomb} functions to update the game layout and the countdown of bombs, while also handling the round timer and the maximum number of bombs by invoking \textbf{check-roundtimer?} and \textbf{add-maximum}. If any bomb's countdown reaches zero, it calls the \textbf{boom} function to handle chain explosion effects. Within \textbf{boom}, the \textbf{single-boom-range} function calculates the explosion range of a single bomb, and \textbf{extend-direction} extends the explosion range in all directions. Subsequently, the player and layout states are updated accordingly. Auxiliary functions such as \textbf{check-I?} and \textbf{check-D?} are used to determine whether a specific cell is an indestructible or destructible wall, while \textbf{chain-explosion} handles chain reactions and updates the bomb list. After processing in \textbf{boom} is complete, the \textbf{remove-bomb} function removes bombs that have already exploded. Through the close coordination of these functions, \textbf{timehandler} dynamically updates all critical game states at each tick.

\section{Big-bang}
\hspace{1.27cm}The \textbf{big-bang} function ties together the following components:

- \textbf{on-tick:} Calls the \textbf{timehandler} function to update the gamestate dynamically at each tick.

- \textbf{on-key:} Invokes the keyhandler functions to process user inputs, such as player movements and bomb placements.

- \textbf{to-draw:} Uses render functions to display the current game layout, including players, bombs, and other elements.

- \textbf{stop-when:} Determines when the game should end by calling the \textbf{end?} function.

- \textbf{final:} Displays the appropriate endgame screen when the game ends.

\section{Stop-when}
\hspace{1.27cm}This part describes the logic for determining when the game should stop and how the final game state is displayed. It consists of the following key functions:

\textbf{end?:} This function checks whether the game should stop based on the current game state. The game ends if any of the following conditions are met:

- The player has chosen to quit the game.

- The round timer reaches 0.

- Both players have died.

- Player 1 has died.

- Player 2 has died.

The function returns \textbf{\#t} if any of these conditions are true and \textbf{\#f} otherwise.

\textbf{final:} Once the game ends, this function determines the final image to display based on the game state. 

- If the player has chosen to quit, it returns \textbf{quit-image}.

- If both players have died or the round timer has finished, it returns \textbf{tie}.

- If only Player 1 has died, it returns \textbf{player2-win}.

- If only Player 2 has died, it returns \textbf{player1-win}.

This ensures that the appropriate message is displayed to reflect the game's outcome.

Auxiliary functions such as \textbf{check-player1-died?}, \textbf{check-player2-died?}, and \textbf{check-all-died?} are used by \textbf{end?} to evaluate the players' statuses. Additionally, helper functions like \textbf{player1-win}, \textbf{player2-win}, and \textbf{tie} are invoked by \textbf{final} to generate specific endgame images based on the result.

\end{document}
